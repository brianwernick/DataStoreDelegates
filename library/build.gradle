plugins {
  alias libs.plugins.android.library
  alias libs.plugins.kotlin.android
}

afterEvaluate {
  apply from: '../gradle/release/publish.gradle'
}

dependencies {
  api libs.kotlin.stdlib.jdk7
  api libs.datastore.preferences

  testImplementation libs.junit
  testImplementation libs.robolectric
}

android {
  compileSdk 35

  namespace 'com.devbrackets.android.datastore'

  defaultConfig {
    minSdkVersion 23
    targetSdkVersion 35
  }

  sourceSets {
    main.java.srcDirs += "src/main/kotlin"
    test.java.srcDirs += "src/test/kotlin"
  }

  buildFeatures {
    buildConfig true
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_11
    targetCompatibility JavaVersion.VERSION_11
  }

  kotlinOptions {
    jvmTarget = JavaVersion.VERSION_11
  }

  testOptions {
    unitTests {
      includeAndroidResources = true
    }
  }

  lint {
    abortOnError false
  }
}
